// Theme CSS variables
// Light theme is the default

:root {
  // Background colors
  --bg-primary: #ffffff;
  --bg-secondary: #fcfcfc;
  --bg-tertiary: #fafafa;
  --bg-hover: #f5f7fa;
  --bg-active: #e6e6e6;
  --bg-sidebar-dark: #404040;
  --bg-sidebar-dark-hover: #666;

  // Text colors
  --text-primary: #303133;
  --text-secondary: #606266;
  --text-tertiary: #909399;
  --text-placeholder: #c0c4cc;
  --text-light: #f2f2f2;

  // Border colors
  --border-primary: #e4e7ed;
  --border-secondary: #ebeef5;
  --border-tertiary: #eaeaea;
  --border-light: #e6e6e6;
  --border-dark: #555;

  // Component specific
  --header-bg: #ffffff;
  --header-border: #eee;
  --content-bg: #fcfcfc;
  --doc-sidebar-bg: #fafafa;
  --doc-sidebar-border: #fafafa;
  --doc-sidebar-selected: #e6e6e6;
  --doc-sidebar-text: #595959;
  --book-sidebar-bg: #404040;
  --book-sidebar-border: #404040;
  --book-sidebar-selected: #666;
  --book-sidebar-text: #f2f2f2;

  // Editor / Code
  --code-bg: #f5f7fa;
  --editor-toolbar-bg: #ffffff;
  --editor-toolbar-border: #e6e6e6;
  --editor-toolbar-icon: #3f4a54;
  --editor-toolbar-hover: #f6f6f6;

  // AI Sidebar
  --ai-sidebar-bg: #ffffff;
  --ai-user-task-bg: #f5f7fa;
  --ai-reasoning-bg: #fafafa;
  --ai-reasoning-hover: #f5f7fa;
  --ai-error-bg: #fff2f0;
  --ai-search-current-bg: #ecf5ff;

  // Dialog / Popover
  --dialog-bg: #ffffff;
  --popover-bg: #ffffff;

  // Loading mask
  --loading-mask-bg: rgba(255, 255, 255, 0.9);
  --loading-mask-sidebar: #fafafa;
  --loading-mask-book: #404040;

  // Scrollbar
  --scrollbar-thumb: #c0c4cc;
  --scrollbar-track: transparent;

  // Shadow
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.1);
}

// Global scrollbar styling
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

// Dark theme - all dark mode styles consolidated
[data-theme="dark"] {
  // Mobile tap highlight color (change from blue to yellow)
  -webkit-tap-highlight-color: rgba(230, 192, 123, 0.3);

  // Background colors
  --bg-primary: #1a1a1a;
  --bg-secondary: #1e1e1e;
  --bg-tertiary: #252525;
  --bg-hover: #2a2a2a;
  --bg-active: #333333;
  --bg-sidebar-dark: #1a1a1a;
  --bg-sidebar-dark-hover: #2a2a2a;

  // Text colors
  --text-primary: #d4d4d4;
  --text-secondary: #a0a0a0;
  --text-tertiary: #707070;
  --text-placeholder: #505050;
  --text-light: #d4d4d4;

  // Border colors
  --border-primary: #333333;
  --border-secondary: #2a2a2a;
  --border-tertiary: #2d2d2d;
  --border-light: #3a3a3a;
  --border-dark: #404040;

  // Component specific
  --header-bg: #1a1a1a;
  --header-border: #2a2a2a;
  --content-bg: #1e1e1e;
  --doc-sidebar-bg: #1c1c1c;
  --doc-sidebar-border: #1c1c1c;
  --doc-sidebar-selected: #2a2a2a;
  --doc-sidebar-text: #a0a0a0;
  --book-sidebar-bg: #1a1a1a;
  --book-sidebar-border: #1a1a1a;
  --book-sidebar-selected: #2a2a2a;
  --book-sidebar-text: #d4d4d4;

  // Editor / Code
  --code-bg: #1a1a1a;
  --editor-toolbar-bg: #1e1e1e;
  --editor-toolbar-border: #333333;
  --editor-toolbar-icon: #a0a0a0;
  --editor-toolbar-hover: #2a2a2a;

  // AI Sidebar
  --ai-sidebar-bg: #1e1e1e;
  --ai-user-task-bg: #252525;
  --ai-reasoning-bg: #1e1e1e;
  --ai-reasoning-hover: #252525;
  --ai-error-bg: #3d2020;
  --ai-search-current-bg: #2a2a2a;

  // Dialog / Popover
  --dialog-bg: #1e1e1e;
  --popover-bg: #252525;

  // Loading mask
  --loading-mask-bg: rgba(26, 26, 26, 0.9);
  --loading-mask-sidebar: #1e1e1e;
  --loading-mask-book: #1a1a1a;

  // Scrollbar
  --scrollbar-thumb: #404040;
  --scrollbar-track: #1e1e1e;

  // Shadow
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.5);

  // md-editor-v3 cyanosis theme overrides
  .md-editor-preview,
  .cyanosis-theme {
    --md-theme-color: #d4d4d4;
    --md-theme-base-color: #d4d4d4;
    --md-theme-title-color: #d4d4d4;
    --md-theme-strong-color: #e6c07b;
    --md-theme-link-color: #e6c07b;
    --md-theme-linkh-color: #f0d090;
    --md-theme-blockquote-color: #a0a0a0;
    --md-theme-blockquote-bg-color: #252525;
    --md-theme-code-color: #e6c07b;
    --md-theme-code-bg-color: #3d3520;
    --md-theme-border-color: #333333;
    --md-theme-border-color-2: #333333;
    --md-theme-table-border-color: #333333;
  }
  // Primary color for focus states
  --el-color-primary: #e6c07b;
  --el-color-primary-light-3: #d4a656;
  --el-color-primary-light-5: #c9985a;
  --el-color-primary-light-7: #b38a50;
  --el-color-primary-light-8: #a07d48;
  --el-color-primary-light-9: #3d3520;
  --el-color-primary-dark-2: #f0d090;

  // Form elements
  --el-bg-color: var(--bg-primary);
  --el-bg-color-overlay: var(--bg-tertiary);
  --el-bg-color-page: var(--bg-secondary);
  --el-text-color-primary: var(--text-primary);
  --el-text-color-regular: var(--text-secondary);
  --el-text-color-secondary: var(--text-tertiary);
  --el-text-color-placeholder: var(--text-placeholder);
  --el-border-color: var(--border-primary);
  --el-border-color-light: var(--border-secondary);
  --el-border-color-lighter: var(--border-tertiary);
  --el-fill-color: var(--bg-tertiary);
  --el-fill-color-light: var(--bg-hover);
  --el-fill-color-lighter: var(--bg-active);
  --el-fill-color-blank: var(--bg-primary);

  // Dialog
  --el-dialog-bg-color: var(--dialog-bg);

  // Popover
  --el-popover-bg-color: var(--popover-bg);

  // Dropdown
  --el-dropdown-menuItem-hover-fill: #2a2a2a;
  --el-dropdown-menuItem-hover-color: var(--text-primary);

  // Input
  --el-input-bg-color: var(--bg-tertiary);
  --el-input-border-color: var(--border-primary);
  --el-input-text-color: var(--text-primary);
  --el-input-placeholder-color: var(--text-placeholder);
  --el-input-focus-border-color: #e6c07b;

  // Select
  --el-select-input-focus-border-color: #e6c07b;

  // Button
  --el-button-bg-color: var(--bg-tertiary);
  --el-button-border-color: var(--border-primary);
  --el-button-text-color: var(--text-primary);
  --el-button-hover-bg-color: var(--bg-hover);
  --el-button-hover-border-color: var(--border-light);

  // Message Box
  --el-messagebox-title-color: var(--text-primary);
  --el-messagebox-content-color: var(--text-secondary);

  // Loading
  --el-mask-color: var(--loading-mask-bg);

  // Empty
  --el-empty-description-margin-top: 20px;
}

// Dark theme global styles for popup layers (mounted on body)
html[data-theme="dark"] {
  // Element Plus color variables for dark mode popups
  --el-bg-color-overlay: #252525;
  --el-fill-color-light: #2a2a2a;

  // Radio button group - darker style
  .el-radio-button {
    .el-radio-button__inner {
      background-color: #2a2a2a !important;
      border-color: #404040 !important;
      color: #a0a0a0 !important;
    }

    &.is-active .el-radio-button__inner {
      background-color: #8a6a2a !important;
      border-color: #8a6a2a !important;
      color: #fff !important;
      // Hide the bright left border from adjacent button
      box-shadow: -1px 0 0 0 #8a6a2a !important;
    }

    &:not(.is-active):hover .el-radio-button__inner {
      color: #d4d4d4 !important;
    }
  }

  // Input/Select focus border
  .el-input.is-focus .el-input__wrapper,
  .el-input__wrapper:focus,
  .el-input__wrapper.is-focus,
  .el-select .el-input.is-focus .el-input__wrapper {
    box-shadow: 0 0 0 1px #e6c07b inset !important;
  }

  // Dropdown menu
  .el-dropdown-menu {
    background-color: #252525 !important;
    border-color: #333333 !important;
  }

  .el-dropdown-menu__item {
    color: #d4d4d4 !important;

    &:hover,
    &:focus {
      background-color: #2a2a2a !important;
      color: #ffd966 !important;
    }
  }

  // Select dropdown
  .el-select-dropdown {
    background-color: #252525 !important;
    border-color: #333333 !important;
  }

  .el-select-dropdown__item {
    color: #d4d4d4 !important;

    &.hover,
    &:hover {
      background-color: #2a2a2a !important;
      color: #ffd966 !important;
    }

    &.selected,
    &.is-selected {
      color: #ffd966 !important;
      background-color: #2a2a2a !important;
      font-weight: bold !important;
    }
  }

  // Force override for select dropdown items
  .el-select-dropdown__list .el-select-dropdown__item.hover,
  .el-select-dropdown__list .el-select-dropdown__item:hover {
    background-color: #2a2a2a !important;
    color: #ffd966 !important;
  }

  .el-select-dropdown__list .el-select-dropdown__item.selected,
  .el-select-dropdown__list .el-select-dropdown__item.is-selected {
    color: #ffd966 !important;
    background-color: #2a2a2a !important;
  }

  // Popper (used by el-select, el-popover, etc.)
  .el-popper {
    background-color: #252525 !important;
    border-color: #333333 !important;
  }

  .el-popper__arrow::before {
    background-color: #252525 !important;
    border-color: #333333 !important;
  }

  // Unified button hover/active styles - all buttons should be darker before hover, lighter after hover
  .el-button {
    // Default button
    &--default:not(.is-link) {
      &:hover,
      &:focus {
        background-color: #3a3a3a !important;
        border-color: #505050 !important;
      }
      &:active {
        background-color: #4a4a4a !important;
        border-color: #606060 !important;
      }
    }

    // Primary and Warning buttons (both yellow)
    &--primary:not(.is-link),
    &--warning:not(.is-link) {
      background-color: #8a6a2a !important;
      border-color: #8a6a2a !important;
      color: #fff !important;
      &:hover,
      &:focus {
        background-color: #9a7a3a !important;
        border-color: #9a7a3a !important;
      }
      &:active {
        background-color: #aa8a4a !important;
        border-color: #aa8a4a !important;
      }
      &.is-disabled,
      &.is-disabled:hover {
        background-color: #5a4a1a !important;
        border-color: #5a4a1a !important;
      }
    }

    // Success button (green)
    &--success:not(.is-link) {
      background-color: #2a6a4a !important;
      border-color: #2a6a4a !important;
      &:hover,
      &:focus {
        background-color: #3a7a5a !important;
        border-color: #3a7a5a !important;
      }
      &:active {
        background-color: #4a8a6a !important;
        border-color: #4a8a6a !important;
      }
      &.is-disabled,
      &.is-disabled:hover {
        background-color: #1a4a3a !important;
        border-color: #1a4a3a !important;
      }
    }

    // Danger button (red) - exclude link type
    &--danger:not(.is-link) {
      background-color: #8a2a2a !important;
      border-color: #8a2a2a !important;
      &:hover,
      &:focus {
        background-color: #9a3a3a !important;
        border-color: #9a3a3a !important;
      }
      &:active {
        background-color: #aa4a4a !important;
        border-color: #aa4a4a !important;
      }
      &.is-disabled,
      &.is-disabled:hover {
        background-color: #5a1a1a !important;
        border-color: #5a1a1a !important;
      }
    }

    // Info button (gray) - exclude link type
    &--info:not(.is-link) {
      background-color: #4a4a4a !important;
      border-color: #4a4a4a !important;
      &:hover,
      &:focus {
        background-color: #5a5a5a !important;
        border-color: #5a5a5a !important;
      }
      &:active {
        background-color: #6a6a6a !important;
        border-color: #6a6a6a !important;
      }
      &.is-disabled,
      &.is-disabled:hover {
        background-color: #3a3a3a !important;
        border-color: #3a3a3a !important;
      }
    }

    // Text button (no background)
    &.is-text,
    &--text {
      &:hover,
      &:focus {
        background-color: #3a3a3a !important;
      }
      &:active {
        background-color: #4a4a4a !important;
      }
    }

    // Link button - no background, only color change on hover (brighter)
    &.is-link {
      background-color: transparent !important;
      border-color: transparent !important;
      &:hover,
      &:focus {
        background-color: transparent !important;
        border-color: transparent !important;
      }
      &:active {
        background-color: transparent !important;
        border-color: transparent !important;
      }
    }

    // Primary and Warning link buttons (both yellow)
    &--primary.is-link,
    &--warning.is-link {
      color: #e6a23c !important;
      &:hover,
      &:focus {
        color: #f0c060 !important;
      }
      &:active {
        color: #ffd980 !important;
      }
    }

    // Success link button
    &--success.is-link {
      color: #67c23a !important;
      &:hover,
      &:focus {
        color: #85d35a !important;
      }
      &:active {
        color: #a3e47a !important;
      }
    }

    // Danger link button - brighter red on hover
    &--danger.is-link {
      color: #f56c6c !important;
      &:hover,
      &:focus {
        color: #f89090 !important;
      }
      &:active {
        color: #fab4b4 !important;
      }
    }

    // Info link button - brighter gray on hover
    &--info.is-link {
      color: #909399 !important;
      &:hover,
      &:focus {
        color: #b0b3b8 !important;
      }
      &:active {
        color: #d0d3d8 !important;
      }
    }
  }

  // Exception: Tool pages with multiple button colors keep primary as blue
  .page-rsa,
  .page-regular,
  .page-generate,
  .page-encryption {
    .el-button--primary:not(.is-link) {
      background-color: #2a5a8a !important;
      border-color: #2a5a8a !important;
      color: #fff !important;
      &:hover,
      &:focus {
        background-color: #3a6a9a !important;
        border-color: #3a6a9a !important;
      }
      &:active {
        background-color: #4a7aaa !important;
        border-color: #4a7aaa !important;
      }
      &.is-disabled,
      &.is-disabled:hover {
        background-color: #1a3a5a !important;
        border-color: #1a3a5a !important;
      }
    }

    .el-button--primary.is-link {
      color: #5a9acf !important;
      &:hover,
      &:focus {
        color: #7ab4e6 !important;
      }
      &:active {
        color: #9acef0 !important;
      }
    }
  }
}
